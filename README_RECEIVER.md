# Yonku Counter BLE Receiver

## 仕様
Yonku Counter BLE Serverから送信されたデータを受信し、シリアルモニターに表示する。データ受信時にLEDが点滅して視覚的フィードバックを提供する。

## 詳細説明

### ハードウェア構成
- メインボード: Seeed XIAO ESP32S3
- LED: 内蔵LED (GPIO21)

### BLE通信仕様
1. **接続設定**
   - スキャン対象: "Yonku Counter BLE Server"
   - サービスUUID: "4fafc201-1fb5-459e-8fcc-c5c9c331914b"
   - キャラクタリスティックUUID: "beb5483e-36e1-4688-b7f5-ea07361b26a8"

2. **データ受信機能**
   - 自動スキャンとサーバー検出
   - 通知（Notification）による非同期データ受信
   - 受信データのシリアル出力
   - LED点滅によるデータ受信表示（100ms）

3. **自動再接続機能**
   - 接続切断時の自動再スキャン
   - サーバー検出時の自動再接続

### LED表示
- データ受信時: 100ms点灯
- 非同期制御による他の処理への影響なし

### 使用方法

#### ビルドとアップロード
```bash
# 受信側プログラムのビルドとアップロード
pio run -e receiver -t upload
```

#### 動作確認
1. シリアルモニタを開く（115200bps）
2. 送信側デバイスの電源を入れる
3. 自動的にスキャン・接続
4. データ受信時にLED点滅とシリアル出力を確認

#### デバッグ機能
- シリアルモニタでのログ表示
  - スキャン状態
  - 接続/切断イベント
  - 受信データ

### 開発環境
- PlatformIO
- フレームワーク: Arduino
- ボード: Seeed XIAO ESP32S3

### 注意事項
- BLE通信距離は環境により変動（最大約10m）
- 送信側と受信側のUUIDが一致している必要あり
- 複数のBLEデバイスが存在する環境では、指定したUUIDのデバイスのみに接続
